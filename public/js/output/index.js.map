{"mappings":"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","sources":["public/js/mapbox.js","public/js/alert.js","public/js/login.js","public/js/updateUser.js","public/js/checkout.js","public/js/index.js"],"sourcesContent":["export const mapbox = (locations) => {\n  mapboxgl.accessToken =\n    'pk.eyJ1IjoiYmlzaGFsa2Fya2kiLCJhIjoiY2t6NG4wbHlmMGk5bDJ2bnltYzR1ZW54NCJ9.3hBPs8q_dHXFJ0lK6ln7SA';\n  const map = new mapboxgl.Map({\n    container: 'map', // container ID\n    style: 'mapbox://styles/mapbox/streets-v11', //style\n    scrollZoom: false,\n  });\n  const bounds = new mapboxgl.LngLatBounds();\n\n  locations.forEach((loc) => {\n    //create marker\n    const el = document.createElement('div');\n    el.className = 'marker';\n    //Add marker\n    new mapboxgl.Marker({\n      element: el,\n      anchor: 'bottom',\n    })\n      .setLngLat(loc.coordinates)\n      .addTo(map);\n    //Add popup\n    new mapboxgl.Popup({ offset: 30 })\n      .setLngLat(loc.coordinates)\n      .setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`)\n      .addTo(map);\n\n    //Extend map bounds to include current location\n    bounds.extend(loc.coordinates);\n  });\n\n  map.fitBounds(bounds);\n};\n","export const hideAlert = () => {\n  const el = document.querySelector('.alert');\n  if (el) el.parentElement.removeChild(el);\n};\nexport const showAlert = (type, msg) => {\n  hideAlert();\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\n  window.setTimeout(hideAlert, 5000);\n};\n","import { showAlert } from './alert.js';\n\nexport const login = async (email, password) => {\n  try {\n    const result = await axios({\n      method: 'post',\n      url: '/api/v1/users/signin',\n      data: {\n        email,\n        password,\n      },\n    });\n\n    if ((result.data.status = 'success')) {\n      showAlert('success', 'logged in successfully!');\n      window.setTimeout(() => {\n        location.assign('/');\n      }, 1500);\n    }\n  } catch (error) {\n    showAlert('error', error.response.data.message);\n  }\n};\nexport const signup = async (name, email, password, passwordConfirm) => {\n  try {\n    const result = await axios({\n      method: 'post',\n      url: '/api/v1/users/signup',\n      data: { name, email, password, passwordConfirm },\n    });\n    if ((result.data.status = 'success')) {\n      showAlert('success', 'sign up successfully!');\n      window.setTimeout(() => {\n        location.assign('/');\n      }, 1500);\n    }\n  } catch (error) {\n    showAlert('error', error.response.data.message);\n  }\n};\nexport const logout = async () => {\n  try {\n    const result = await axios({\n      method: 'GET',\n      url: '/api/v1/users/logout',\n    });\n\n    if (result.data.status === 'success') {\n      window.setTimeout(() => {\n        location.assign('/');\n      }, 1000);\n    }\n  } catch (error) {\n    showAlert('error', error.response.data.message);\n  }\n};\n","import { showAlert } from './alert';\nexport const updateSetting = async (data, type) => {\n  try {\n    const url =\n      type === 'password'\n        ? '/api/v1/users/updatepassword'\n        : '/api/v1/users/updateme';\n    const result = await axios({\n      method: 'patch',\n      url,\n      data,\n    });\n\n    if ((result.data.status = 'success')) {\n      showAlert('success', `user ${type} updated successfully`);\n    }\n  } catch (error) {\n    showAlert('error', error.response.data.message);\n  }\n};\n","import { showAlert } from './alert.js';\nconst stripe = Stripe(\n  'pk_test_51KQpuTKrlXNuJzMcYQn015K2UlTnesCu0KnHXGEwbG52vHrjHOgKV5HlKzukUhRwPbaK846qTRlnkj5igvxt84Kd00RMfao0h2'\n);\n\nexport const bookNow = async (tourID) => {\n  try {\n    //1)get checkout session from the api\n    const session = await axios(`/api/v1/bookings/checkout-session/${tourID}`);\n\n    //2)create checkout form and charge the credit card\n    if (session) {\n      await stripe.redirectToCheckout({ sessionId: session.data.session.id });\n    }\n  } catch (error) {\n    showAlert('error', error);\n  }\n};\n","import { mapbox } from './mapbox.js';\nimport { login, logout, signup } from './login.js';\nimport { updateSetting } from './updateUser.js';\nimport { bookNow } from './checkout.js';\nconst mapBoxElement = document.getElementById('map');\nconst formElement = document.querySelector('.form--login');\nconst signupFormElement = document.querySelector('.form--signup');\nconst logoutElement = document.querySelector('.nav__el--logout');\nconst updateFormElement = document.querySelector('.form-user-data');\nconst updatePasswordElement = document.querySelector('.form-user-password');\nconst bookNowElement = document.getElementById('book-tour');\n\n//if the element exists, then invoke following code.\n//this is for map box\n\nif (mapBoxElement) {\n  const locations = JSON.parse(mapBoxElement.dataset.locations);\n  mapbox(locations);\n}\n//this is for logging form\nif (formElement) {\n  formElement.addEventListener('submit', (event) => {\n    event.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    login(email, password);\n  });\n}\n//this is for signing in user\nif (signupFormElement) {\n  signupFormElement.addEventListener('submit', (event) => {\n    event.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    const confirmPassword = document.getElementById('passwordCon').value;\n    const name = document.getElementById('name').value;\n    console.log(name, email, password, passwordConfirm);\n    login(name, email, password, confirmPassword);\n  });\n}\n\n//this is for logging out form\n\nif (logoutElement) {\n  logoutElement.addEventListener('click', (event) => {\n    event.preventDefault();\n    logout();\n  });\n}\n//this is for updating user via form input\n\nif (updateFormElement) {\n  updateFormElement.addEventListener('submit', (event) => {\n    event.preventDefault();\n    const formData = new FormData();\n    formData.append('email', document.getElementById('email').value);\n    formData.append('name', document.getElementById('name').value);\n    formData.append('photo', document.getElementById('photo').files[0]);\n\n    updateSetting(formData, 'data');\n  });\n}\n//this is for updating password via form input\nif (updatePasswordElement) {\n  updatePasswordElement.addEventListener('submit', (event) => {\n    event.preventDefault();\n    const passwordCurrent = document.getElementById('password-current').value;\n    const password = document.getElementById('password').value;\n    const passwordConfirm = document.getElementById('password-confirm').value;\n    updateSetting({ passwordCurrent, password, passwordConfirm }, 'password');\n  });\n}\n//this is for checkout page\nif (bookNowElement) {\n  bookNowElement.addEventListener('click', (event) => {\n    event.preventDefault();\n    bookNowElement.innerHTML = 'Processing...';\n    const { tourId } = event.target.dataset;\n    console.log(tourId);\n    bookNow(tourId);\n  });\n}\n"],"names":["$49c641c32e64cfd4$export$516836c6a9dfc573","el","document","querySelector","parentElement","removeChild","$49c641c32e64cfd4$export$de026b00723010c1","type","msg","markup","insertAdjacentHTML","window","setTimeout","$bc2605d378b662f9$export$596d806903d1f59e","async","email","password","axios","method","url","data","status","location","assign","error","response","message","$3a2e7a9fd83759e2$export$87d51fc9023e4534","$5951db76fd516fa6$var$stripe","Stripe","$f9377203aca294a9$var$mapBoxElement","getElementById","$f9377203aca294a9$var$formElement","$f9377203aca294a9$var$signupFormElement","$f9377203aca294a9$var$logoutElement","$f9377203aca294a9$var$updateFormElement","$f9377203aca294a9$var$updatePasswordElement","$f9377203aca294a9$var$bookNowElement","locations","mapboxgl","accessToken","map","Map","container","style","scrollZoom","bounds","LngLatBounds","forEach","loc","createElement","className","Marker","element","anchor","setLngLat","coordinates","addTo","Popup","offset","setHTML","day","description","extend","fitBounds","$f760948822a96798$export$bb45774509d75444","JSON","parse","dataset","addEventListener","event","preventDefault","value","name","console","log","passwordConfirm","$bc2605d378b662f9$export$a0973bcfe11b05c9","formData","FormData","append","files","passwordCurrent","innerHTML","tourId","target","tourID","session","redirectToCheckout","sessionId","id","$5951db76fd516fa6$export$ff983f6dd389b2d2"],"version":3,"file":"index.js.map","sourceRoot":"../../../"}